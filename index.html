<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Air Quality Checker</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            text-align: center;
            margin: 50px;
        }
        input {
            padding: 10px;
            width: 200px;
            margin-right: 10px;
        }
        button {
            padding: 10px;
            background-color: #4CAF50;
            color: white;
            border: none;
            cursor: pointer;
        }
        button:hover {
            background-color: #4550a0;
        }
        #air-quality-result {
            margin-top: 20px;
            font-size: 18px;
        }
        #tips {
            margin-top: 30px;
            font-size: 16px;
            color: #555;
        }
        #pollutant-info {
            margin-top: 20px;
            font-size: 16px;
            color: #444;
        }
    </style>
</head>
<body>
    <h1>Check Air Quality</h1>
    
    <!-- Input for the city -->
    <input type="text" id="city" placeholder="Enter city name">
    <button onclick="getAirQuality()">Get Air Quality</button>
    
    <!-- This is where the air quality info will appear -->
    <div id="air-quality-result"></div>

    <!-- This is where the tips for improving air quality will appear -->
    <div id="tips"></div>

    <!-- This is where the pollutant explanations will appear -->
    <div id="pollutant-info"></div>

    <script>
        // Your new API key (provided)
        const apiKey = "aa0d475510948f8595f43d794f60ae75";

        // Function to get the air quality
        function getAirQuality() {
            const city = document.getElementById("city").value;

            if (!city) {
                alert("Please enter a city name!");
                return;
            }

            // Fetch weather data (latitude and longitude)
            const weatherApiUrl = `https://api.openweathermap.org/data/2.5/weather?q=${encodeURIComponent(city)}&appid=${apiKey}`;

            fetch(weatherApiUrl)
                .then(response => {
                    if (!response.ok) {
                        throw new Error(`Error fetching weather data: ${response.statusText}`);
                    }
                    return response.json();
                })
                .then(data => {
                    if (data.cod !== 200) {
                        document.getElementById("air-quality-result").innerHTML = "City not found. Please try again.";
                        return;
                    }

                    const lat = data.coord.lat;
                    const lon = data.coord.lon;

                    // Fetch air quality data
                    const airPollutionApiUrl = `https://api.openweathermap.org/data/2.5/air_pollution?lat=${lat}&lon=${lon}&appid=${apiKey}`;

                    fetch(airPollutionApiUrl)
                        .then(response => response.json())
                        .then(airData => {
                            const aqi = airData.list[0].main.aqi;
                            const components = airData.list[0].components;

                            let aqiStatus = "";
                            switch (aqi) {
                                case 1:
                                    aqiStatus = "Good";
                                    break;
                                case 2:
                                    aqiStatus = "Fair";
                                    break;
                                case 3:
                                    aqiStatus = "Moderate";
                                    break;
                                case 4:
                                    aqiStatus = "Poor";
                                    break;
                                case 5:
                                    aqiStatus = "Very Poor";
                                    break;
                                default:
                                    aqiStatus = "Unknown";
                                    break;
                            }

                            // Display air quality results
                            document.getElementById("air-quality-result").innerHTML = `
                                <p>City: ${city}</p>
                                <p>Air Quality Index (AQI): ${aqiStatus}</p>
                            `;

                            // Provide tips only for Moderate, Poor, or Very Poor AQI
                            if (aqi === 3 || aqi === 4 || aqi === 5) {
                                let tips = "<h2>What You Can Do to Improve Air Quality:</h2><ul>";

                                if (aqi === 5) {
                                    tips += "<li>Reduce car use by walking, biking, or using public transport.</li>";
                                    tips += "<li>Reduce energy consumption by turning off lights when not in use.</li>";
                                    tips += "<li>Support policies that reduce industrial emissions and promote green technologies.</li>";
                                } else if (aqi === 4) {
                                    tips += "<li>Limit outdoor activities when air quality is poor.</li>";
                                    tips += "<li>Use electric-powered appliances and heating systems instead of fossil fuels.</li>";
                                } else if (aqi === 3) {
                                    tips += "<li>Try carpooling or using public transport.</li>";
                                    tips += "<li>Plant trees and vegetation to improve air quality in your area.</li>";
                                }

                                tips += "</ul>";
                                document.getElementById("tips").innerHTML = tips;
                            } else {
                                // Hide tips if AQI is Good or Fair
                                document.getElementById("tips").innerHTML = "";
                            }

                            // Pollutant explanations and assessment
                            const pollutantInfo = `
                                <h2>Pollutants and Their Levels:</h2>
                                <ul>
                                    <li><strong>PM2.5 (Particulate Matter):</strong> Fine particles that can enter the lungs and bloodstream, affecting heart and lung health.
                                        <br>Value: ${components.pm2_5} µg/m³ - ${assessPollutant("PM2.5", components.pm2_5)}
                                    </li>
                                    <li><strong>NO2 (Nitrogen Dioxide):</strong> A gas that can irritate the lungs and lead to respiratory problems.
                                        <br>Value: ${components.no2} µg/m³ - ${assessPollutant("NO2", components.no2)}
                                    </li>
                                    <li><strong>O3 (Ozone):</strong> Ground-level ozone can cause lung damage and worsen asthma.
                                        <br>Value: ${components.o3} µg/m³ - ${assessPollutant("O3", components.o3)}
                                    </li>
                                    <li><strong>CO (Carbon Monoxide):</strong> A colorless, odorless gas that can interfere with the oxygen in your blood.
                                        <br>Value: ${components.co} µg/m³ - ${assessPollutant("CO", components.co)}
                                    </li>
                                    <li><strong>SO2 (Sulfur Dioxide):</strong> A gas that can irritate the lungs and cause respiratory problems.
                                        <br>Value: ${components.so2} µg/m³ - ${assessPollutant("SO2", components.so2)}
                                    </li>
                                </ul>
                            `;

                            document.getElementById("pollutant-info").innerHTML = pollutantInfo;
                        })
                        .catch(error => {
                            console.error("Error fetching air quality data:", error);
                            document.getElementById("air-quality-result").innerHTML = "Could not fetch air quality data.";
                        });
                })
                .catch(error => {
                    console.error("Error fetching weather data:", error);
                    document.getElementById("air-quality-result").innerHTML = "Could not fetch city data.";
                });
        }

        // Function to assess the pollutant value
        function assessPollutant(pollutant, value) {
            if (pollutant === "PM2.5") {
                if (value <= 12) return "Good";
                if (value <= 35) return "Fair";
                if (value <= 55) return "Moderate";
                if (value <= 150) return "Poor";
                return "Very Poor";
            }
            if (pollutant === "NO2") {
                if (value <= 53) return "Good";
                if (value <= 100) return "Fair";
                if (value <= 360) return "Moderate";
                if (value <= 650) return "Poor";
                return "Very Poor";
            }
            if (pollutant === "O3") {
                if (value <= 60) return "Good";
                if (value <= 120) return "Fair";
                if (value <= 180) return "Moderate";
                if (value <= 240) return "Poor";
                return "Very Poor";
            }
            if (pollutant === "CO") {
                if (value <= 4.4) return "Good";
                if (value <= 9.4) return "Fair";
                if (value <= 15.4) return "Moderate";
                if (value <= 30) return "Poor";
                return "Very Poor";
            }
            if (pollutant === "SO2") {
                if (value <= 35) return "Good";
                if (value <= 75) return "Fair";
                if (value <= 185) return "Moderate";
                if (value <= 304) return "Poor";
                return "Very Poor";
            }
            return "Unknown";
        }
    </script>
</body>
</html>

       


